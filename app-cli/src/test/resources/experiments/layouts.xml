<?xml version="1.0" encoding="UTF-8" ?>
<story id="layouts">

    <layouts>

        <layout id="input_layout">
            <CsvRecord id="header_csv" type="header">
                <field name="ticker" value="&lt;ticker&gt;" type="string" />
                <field name="date" value="&lt;date&gt;" type="string" />
                <field name="open" value="&lt;open&gt;" type="string" />
                <field name="high" value="&lt;high&gt;" type="string" />
                <field name="low" value="&lt;low&gt;" type="string" />
                <field name="close" value="&lt;close&gt;" type="string" />
                <field name="volume" value="&lt;vol&gt;" type="string" />
            </CsvRecord>
            <CsvRecord id="body_csv" type="body">
                <field name="ticker" type="string" />
                <field name="date" type="string" />
                <field name="open" type="string" />
                <field name="high" type="string" />
                <field name="low" type="string" />
                <field name="close" type="string" />
                <field name="volume" type="string" />
            </CsvRecord>
            <FixedLengthRecord id="footer_fixed" type="footer">
                <field name="input_count" value="{{ flow.input.offset }}" type="string" length="20" />
                <field name="output_count" value="{{ flow.output.offset }}" type="string" length="20" />
            </FixedLengthRecord>
        </layout>

        <layout id="avro_input_layout">
            <AvroRecord name="EodCompanyInfo" namespace="com.shocktrade.avro" doc="A schema for EodData companies">
                <field name="symbol" type="string" doc="stock symbol" />
                <field name="description" type="string" doc="company description" />
            </AvroRecord>
        </layout>

        <layout id="csv_input_layout">
            <CsvRecord id="csv_output">
                <field name="ticker" type="string" value="{{ body_csv.ticker }}"/>
                <field name="date" type="string" value="{{ body_csv.date }}"/>
                <field name="open" type="double" value="{{ body_csv.open }}"/>
                <field name="high" type="double" value="{{ body_csv.high }}"/>
                <field name="low" type="double" value="{{ body_csv.low }}"/>
                <field name="close" type="string" value="{{ body_csv.close }}"/>
                <field name="volume" type="long" value="{{ body_csv.volume }}"/>
            </CsvRecord>
        </layout>

        <layout id="delimited_input_layout">
            <DelimitedRecord id="tab_delimited_output" delimiter="\t" quoted="false">
                <field name="ticker" type="string" value="{{ body_csv.ticker }}"/>
                <field name="date" type="string" value="{{ body_csv.date }}"/>
                <field name="open" type="double" value="{{ body_csv.open }}"/>
                <field name="high" type="double" value="{{ body_csv.high }}"/>
                <field name="low" type="double" value="{{ body_csv.low }}"/>
                <field name="close" type="string" value="{{ body_csv.close }}"/>
                <field name="volume" type="long" value="{{ body_csv.volume }}"/>
            </DelimitedRecord>
        </layout>

        <layout id="json_input_layout">
            <JsonRecord id="mongo_output">
                <field name="ticker" type="string" value="{{ body_csv.ticker }}"/>
                <field name="date" type="string" value="{{ body_csv.date }}"/>
                <field name="open" type="double" value="{{ body_csv.open }}"/>
                <field name="high" type="double" value="{{ body_csv.high }}"/>
                <field name="low" type="double" value="{{ body_csv.low }}"/>
                <field name="close" type="string" value="{{ body_csv.close }}"/>
                <field name="volume" type="long" value="{{ body_csv.volume }}"/>
            </JsonRecord>
        </layout>

        <layout id="xml_input_layout">
            <XmlRecord id="xml_output">
                <field name="ticker" type="string" value="{{ body_csv.ticker }}"/>
                <field name="date" type="string" value="{{ body_csv.date }}"/>
                <field name="open" type="double" value="{{ body_csv.open }}"/>
                <field name="high" type="double" value="{{ body_csv.high }}"/>
                <field name="low" type="double" value="{{ body_csv.low }}"/>
                <field name="close" type="string" value="{{ body_csv.close }}"/>
                <field name="volume" type="long" value="{{ body_csv.volume }}"/>
            </XmlRecord>
        </layout>


        <MultiPartLayout id="tabbed-delimited">
            <header>
                <record id="delimited_header" type="delimited" delimiter="\t">
                    <field name="symbol" value="Symbol" type="string"/>
                    <field name="description" value="Description" type="string"/>
                </record>
            </header>
            <body>
                <record id="delimited_data" type="delimited" delimiter="\t">
                    <field name="symbol" type="string"/>
                    <field name="description" type="string"/>
                </record>
            </body>
        </MultiPartLayout>

        <MultiPartLayout id="csv-output">
            <header>
                <record id="csv_header" type="csv">
                    <field name="symbol" value="Symbol" type="string"/>
                    <field name="description" value="Description" type="string"/>
                </record>
            </header>
            <body>
                <record id="csv_data" type="csv">
                    <field name="symbol" type="string" value="{{ delimited_data.symbol }}" />
                    <field name="description" type="string" value="{{ delimited_data.description }}" />
                </record>
            </body>
        </MultiPartLayout>

    </layouts>

</story>