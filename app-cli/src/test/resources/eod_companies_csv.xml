<?xml version="1.0" encoding="UTF-8" ?>
<etl-config id="eod-companies">
    <flows>
        <SimpleFlow id="AMEX->CSV" input="AMEX.txt" output="output.txt"/>
        <SimpleFlow id="NASDAQ->CSV" input="NASDAQ.txt" output="output.txt"/>
        <SimpleFlow id="NYSE->CSV" input="NYSE.txt" output="output.txt"/>
        <SimpleFlow id="OTCBB->CSV" input="OTCBB.txt" output="output.txt"/>
    </flows>

    <devices>
        <TextInputDevice id="AMEX.txt" path="./app-cli/src/test/resources/files/AMEX.txt" layout="tabbed-delimited"/>
        <TextInputDevice id="NASDAQ.txt" path="./app-cli/src/test/resources/files/NASDAQ.txt" layout="tabbed-delimited"/>
        <TextInputDevice id="NYSE.txt" path="./app-cli/src/test/resources/files/NYSE.txt" layout="tabbed-delimited"/>
        <TextInputDevice id="OTCBB.txt" path="./app-cli/src/test/resources/files/OTCBB.txt" layout="tabbed-delimited"/>
        <TextOutputDevice id="output.txt" path="/tmp/output.txt" layout="csv-output"/>
    </devices>

    <layouts>
        <TextLayout id="tabbed-delimited">
            <header>
                <fields type="delimited" delimiter="\t">
                    <field auto-trim="yes">Symbol</field>
                    <field auto-trim="yes">Description</field>
                </fields>
            </header>
            <body>
                <fields type="delimited" delimiter="\t">
                    <field auto-trim="yes">symbol</field>
                    <field auto-trim="yes">description</field>
                </fields>
            </body>
        </TextLayout>

        <TextLayout id="csv-output">
            <header>
                <fields type="delimited" delimiter="\t">
                    <field auto-trim="yes">Ticker</field>
                    <field auto-trim="yes">Company</field>
                </fields>
            </header>
            <body>
                <fields type="csv">
                    <field auto-trim="yes">symbol</field>
                    <field auto-trim="yes">description</field>
                </fields>
            </body>
        </TextLayout>
    </layouts>
</etl-config>